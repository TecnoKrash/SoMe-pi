
// This is the test page to write proofs or test figures

<document>
    <head>
        <title>Some-π test</title>
        <cowx>util.cowx</cowx>
    </head>
    <body>
        <!include-things/> // Links in head don't work, so they are added manually with this

        <main>
            <h1>This is a title</h1>

            This is some text with maths: 
            $$
                {?sqrt 2} / 2 = 1 / {?sqrt 2} 
            $$

            And this is a test canvas with an animation: 
            <!figure id="test-canvas" :caption="A rotating cube"></figure>

            Look in the console to see rust in action (ignore all the errors)!

            <br/>
            <br/>

            There is also draggable handles:
            <!figure id="nearest" :caption="Nearest neighbor interpolation"></figure>
            <!figure id="inverse-distance" :caption="Inverse distance interpolation"></figure>

            <h2>Proofs</h2>

            <!hidden id="existence-proof" :id="existence-proof" :title="Existence et unicité dans un simplexe">
                
                <h4>Existence</h4>

                Let $(A_k)_{k € [0, n]} € E^{n + 1}$, so that $(A_k - A_0)_{k € [1, n]}$ is a basis.
                Let $M € E$.
                There exists $(§a_k)_{k € [1, n]}$ so that:
                $$
                    M - A_0 = |§S__{k=1}^^n §a_k (A_k - A_0)
                $$

                Thus:
                $$
                    M = |§S__{k=1}^^n §a_k A_k + A_0(1 - |§S__{k=1}^^n §a_k)
                $$

                We can then define:
                $$
                    ?a k € [0; n], §b_k = <!system style="vertical-align: middle;">
                        1 - |§S__{k=1}^^n §a_k & ?txt{if} k = 0 &&
                        §a_k & ?txt{otherwise}
                    </system>
                $$

                That satisfies the definition of barycentric coordinates:
                $$
                    M = |{bar}((A_k, §b_k)_{k € [0, n]}) ?txt{et} |§S__{k=0}^^n §b_k = 1
                $$

                <h4>Uniqueness</h4>
                
                Let $M € E$, we suppose that $(a_k)_{k € [0, n]}$ et $(b_k)_{k € [0, n]}$ are barycentric coordinates for $M$ in $(A_k)_{k € [0, n]}$.
                We have then:
                $$
                    M = |§S__{k=1}^^n §a_k A_k = |§S__{k=1}^^n §b_k A_k
                $$

                Then:
                $$
                    |§S__{k=1}^^n A_k (§a_k - §b_k) = 0 &&
                    |§S__{k=1}^^n (A_k - A_0) (§a_k - §b_k) = -A_0 |§S__{k=1}^^n (§a_k - §b_k)
                $$

                We have $|§S__{k=1}^^n §a_k = |§S__{k=1}^^n §b_k = 1$, so the last expression in null. $(A_k - A_0)_{k € [1, n]}$ is a basis,
                so $?a k € [1, n], §a_k - §b_k = 0$, and finally $(a_k)_{k € [0, n]} = (b_k)_{k € [0, n]}$.

            </hidden>

            <!def :title="Barycentric coordinates">
                Like before, let $(A_k)_{k € [0, n]} € E^{n + 1}$, so that $(A_k - A_0)_{k € [1, n]}$ is a basis, and let $M € E$.
                For all $i € [1, n]$, $§l_i(M)$ is the $n$<sup>th</sup> barycentric coordinate for $M$, so:
                $$
                    M = |§S__{k=1}^^{n} §l_k(M) A_k
                $$
            </def>

            Let $k € [0, n]$. $(A_1 ... A_n) \\ {A_k}$ defines a hyperplane $£B_k$ of dimension $n - 1$.

            <!prop :title="Barycentric coordinates expression">
                Let $H$ be the orthogonal projection of $M$ on $|{Vect}(£B_k)$
                and $K$ the orthogonal projection of $A_k$ on $|{Vect}(£B_k)$.
                $$
                    §l_k(M) = {?norm{M - H}} / {?norm{A_k - K}}
                $$
            </prop>

            <!hidden id="expression-proof" :id="expression-proof" :title="Proof">
                Let $k € [0, n]$ and $l € [0, n]$ so that $l !=k$.
                Let $J € £B_k$ so that $M = J + x (A_k - A_l)$ where $x € ||R$.
                Let $N$ the normal vector of $£B_k$.

                We have:
                $$
                    x (A_k - A_l) . N &= ?norm{M - H} &&
                    x (A_k - A_l) . (M - H) &= ?norm{M - H}^2 &&
                    x ((A_k - K) . (M - H) + (K - A_l) . (M - H)) &= ?norm{M - H}^2 &&
                $$

                Then $K$ and $A_l$ are both in $£B_k$, and (A_k - K) and (M - H) are both normal to $£B_k$.
                $$
                    x (?norm{A_k - K} . ?norm{M - H} + 0) &= ?norm{M - H}^2&&
                    x &= { ?norm{M - H} } / { ?norm{A_k - K} }
                $$

                Then by expressing $J$ with it's barycentric coordinates in $£B_k$, that we will note $(§g_i)_{i € [0, n] \\ {k}}$:
                $$
                    M = |§S__{i € [0, n] \\ {k}} §g_i A_i + { ?norm{M - H} } / { ?norm{A_k - K} } (A_k - A_l)
                $$

                The sum of these coordinates are $1$, so we obtained barycentric coordinates.
                Since they are unique we have:
                $$
                    §l_k(M) = { ?norm{M - H} } / { ?norm{A_k - K} }
                $$
            </hidden>
        </main>
    </body>
</document>


